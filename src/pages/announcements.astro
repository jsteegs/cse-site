---
import Layout from "../layouts/Layout.astro";
import SiteWidth from "../components/SiteWidth.astro";
import H1Text from "../components/H1Text.astro";
import CalendarCard from "../components/calendarCard.astro";
import { XMLParser } from "fast-xml-parser";
import AnnouncementCard from "../components/AnnouncementCard.astro";

const response = await fetch(
  "https://plankton-app-nanep.ondigitalocean.app/feed/"
);
const data = await response.text();
const jObj = new XMLParser().parse(data);

const items = jObj.rss.channel.item.reverse();
console.log(items);
---

<Layout title="archive">
  <SiteWidth>
    <div class="my-12">
      <H1Text light>Announcements</H1Text>
    </div>
    <div class="mb-12">
      {
        items.map((item: any) => {
          return <AnnouncementCard item={item} />;
        })
      }
    </div>
  </SiteWidth>
</Layout>
